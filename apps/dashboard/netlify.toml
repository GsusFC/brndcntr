[build]
  command = "npm install --legacy-peer-deps && npm run build:dashboard && rm -rf apps/dashboard/.next/cache"
  publish = "apps/dashboard/.next"

[build.environment]
  NODE_VERSION = "20"
  NPM_FLAGS = "--legacy-peer-deps"

[functions]
  external_node_modules = ["next", "@next/env", "@swc/counter", "@swc/helpers", "busboy", "caniuse-lite", "postcss", "styled-jsx", "@prisma/client", "@prisma/client-write", "@prisma/client-indexer"]
  node_bundler = "zisi"
  included_files = ["node_modules/next/**", "node_modules/@next/env/**", "node_modules/@swc/counter/**", "node_modules/@swc/helpers/**", "node_modules/busboy/**", "node_modules/caniuse-lite/**", "node_modules/postcss/**", "node_modules/styled-jsx/**", "node_modules/@prisma/client-write/**", "node_modules/@prisma/client-indexer/**", "node_modules/.prisma/**"]

[[plugins]]
  package = "@netlify/plugin-nextjs"
